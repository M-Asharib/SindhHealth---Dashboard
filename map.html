<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sindh Cities Map with Multiple Markers</title>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <!-- Bootstrap CSS (optional) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    #map {
      height: 500px; /* Adjust height as needed */
      width: 100%;
      z-index: 1;
      position: relative;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 d-flex align-items-stretch">
        <div class="card w-100">
          <div class="card-body">
            <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
              <div class="mb-3 mb-sm-0">
                <h5 class="card-title fw-semibold">Sindh Cities Map</h5>
              </div>
              <div>
                <!-- Dropdown for Sindh Cities -->
                <select class="form-select" id="citySelect">
                  <option value="">Show All Sindh</option>
                  <option value="Karachi">Karachi</option>
                  <option value="Hyderabad">Hyderabad</option>
                  <option value="Sukkur">Sukkur</option>
                  <option value="Larkana">Larkana</option>
                  <option value="Mirpur Khas">Mirpur Khas</option>
                  <!-- Add more cities as needed -->
                </select>
              </div>
            </div>
            <!-- Map container -->
            <div id="map"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Leaflet Map Script -->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script>
    // Initialize the map centered on Sindh
    var map = L.map('map').setView([25.8943, 68.5247], 7); // Centered on Sindh

    // Add the tile layer (OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Data for cities and their markers
    const cityData = {
      "Karachi": [
        [24.8607, 67.0011, "Karachi Marker 1"],
        [24.8800, 67.0500, "Karachi Marker 2"],
        [24.9000, 67.0200, "Karachi Marker 3"],
        [24.8700, 67.0100, "Karachi Marker 4"],
        [24.8900, 67.0300, "Karachi Marker 5"]
      ],
      "Hyderabad": [
        [25.3792, 68.3683, "Hyderabad Marker 1"],
        [25.3900, 68.3700, "Hyderabad Marker 2"],
        [25.4000, 68.3800, "Hyderabad Marker 3"],
        [25.3700, 68.3600, "Hyderabad Marker 4"],
        [25.3800, 68.3650, "Hyderabad Marker 5"]
      ],
      "Sukkur": [
        [27.7000, 68.8667, "Sukkur Marker 1"],
        [27.7100, 68.8700, "Sukkur Marker 2"],
        [27.7200, 68.8800, "Sukkur Marker 3"],
        [27.6900, 68.8600, "Sukkur Marker 4"],
        [27.7050, 68.8650, "Sukkur Marker 5"]
      ],
      "Larkana": [
        [27.5600, 68.2100, "Larkana Marker 1"],
        [27.5700, 68.2200, "Larkana Marker 2"],
        [27.5800, 68.2300, "Larkana Marker 3"],
        [27.5500, 68.2000, "Larkana Marker 4"],
        [27.5650, 68.2150, "Larkana Marker 5"]
      ],
      "Mirpur Khas": [
        [25.5250, 69.0150, "Mirpur Khas Marker 1"],
        [25.5300, 69.0200, "Mirpur Khas Marker 2"],
        [25.5400, 69.0300, "Mirpur Khas Marker 3"],
        [25.5200, 69.0100, "Mirpur Khas Marker 4"],
        [25.5350, 69.0250, "Mirpur Khas Marker 5"]
      ]
    };

    // Function to add markers to the map
    function addMarkers(markers) {
      markers.forEach(([lat, lng, title]) => {
        L.marker([lat, lng]).addTo(map)
          .bindPopup(`<b>${title}</b><br>Coordinates: ${lat.toFixed(4)}, ${lng.toFixed(4)}`);
      });
    }

    // Function to clear all markers
    function clearMarkers() {
      map.eachLayer(layer => {
        if (layer instanceof L.Marker) {
          map.removeLayer(layer);
        }
      });
    }

    // Show all Sindh markers by default
    const allMarkers = Object.values(cityData).flat();
    addMarkers(allMarkers);

    // Event listener for city selection
    document.getElementById('citySelect').addEventListener('change', function (event) {
      const selectedCity = event.target.value;

      // Clear all existing markers
      clearMarkers();

      if (selectedCity) {
        // Show markers for the selected city
        const cityMarkers = cityData[selectedCity];
        addMarkers(cityMarkers);

        // Center the map on the selected city
        const [lat, lng] = cityMarkers[0]; // Use the first marker's coordinates
        map.setView([lat, lng], 12); // Zoom level 12 for a closer view
      } else {
        // Show all Sindh markers
        addMarkers(allMarkers);
        map.setView([25.8943, 68.5247], 7); // Reset to Sindh view
      }
    });

    // Ensure the map resizes correctly
    setTimeout(function () {
      map.invalidateSize();
    }, 0);
  </script>
</body>
</html>